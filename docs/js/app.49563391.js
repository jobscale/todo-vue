(function(e){function n(n){for(var r,c,u=n[0],a=n[1],s=n[2],d=0,l=[];d<u.length;d++)c=u[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&l.push(o[c][0]),o[c]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);f&&f(n);while(l.length)l.shift()();return i.push.apply(i,s||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],r=!0,c=1;c<t.length;c++){var a=t[c];0!==o[a]&&(r=!1)}r&&(i.splice(n--,1),e=u(u.s=t[0]))}return e}var r={},o={app:0},i=[];function c(e){return u.p+"js/"+({"polyfills-core-js":"polyfills-core-js","polyfills-css-shim":"polyfills-css-shim","polyfills-dom":"polyfills-dom"}[e]||e)+"."+{"chunk-04f8a86f":"36f1a9d2","chunk-17725551":"355045ed","chunk-1af68f81":"fd023bbb","chunk-1d800ad7":"372d8d5a","chunk-2a0d4422":"29ff0a0b","chunk-2d0abfcf":"8417852b","chunk-2d0b26e6":"f44e7e1b","chunk-2d0b2d3b":"825a8c25","chunk-2d0b722b":"ddbb227b","chunk-2d0bad0a":"c62fafa7","chunk-2d0c9398":"50fc4edd","chunk-2d0cf6e3":"e5b7633e","chunk-2d0d7c42":"79be26d5","chunk-2d0dd0bc":"b5c4bb06","chunk-2d208de0":"04efcebb","chunk-2d209182":"7a9f1f4b","chunk-2d217172":"ebd9715e","chunk-2d21d0be":"2bf26885","chunk-2d228cf2":"2eb22644","chunk-2d22c8fe":"51558486","chunk-2d22dbc9":"648f0502","chunk-2d23154f":"8621d2da","chunk-2d238683":"98cbbf51","chunk-39a2e022":"a9972ce8","chunk-59a544b9":"4792e9a0","chunk-5c16a8d7":"3c5b23e3","chunk-d8708fd0":"5b85ff58","chunk-e5e547a4":"16131496","chunk-f993edd8":"d87498c4","polyfills-core-js":"c802f76e","polyfills-css-shim":"ac087954","polyfills-dom":"e01853a0"}[e]+".js"}function u(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,u),t.l=!0,t.exports}u.e=function(e){var n=[],t=o[e];if(0!==t)if(t)n.push(t[2]);else{var r=new Promise((function(n,r){t=o[e]=[n,r]}));n.push(t[2]=r);var i,a=document.createElement("script");a.charset="utf-8",a.timeout=120,u.nc&&a.setAttribute("nonce",u.nc),a.src=c(e);var s=new Error;i=function(n){a.onerror=a.onload=null,clearTimeout(d);var t=o[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,t[1](s)}o[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:a})}),12e4);a.onerror=a.onload=i,document.head.appendChild(a)}return Promise.all(n)},u.m=e,u.c=r,u.d=function(e,n,t){u.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,n){if(1&n&&(e=u(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(u.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)u.d(t,r,function(n){return e[n]}.bind(null,r));return t},u.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(n,"a",n),n},u.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},u.p="/",u.oe=function(e){throw console.error(e),e};var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=n,a=a.slice();for(var d=0;d<a.length;d++)n(a[d]);var f=s;i.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},1:function(e,n){},2:function(e,n){},"521b":function(e,n,t){var r={"./amplify-amazon-button_5.entry.js":["77e1","chunk-2d0d7c42"],"./amplify-auth-container.entry.js":["398f","chunk-2d0bad0a"],"./amplify-auth-fields_9.entry.js":["2689","chunk-2d0b2d3b"],"./amplify-authenticator.entry.js":["b836","chunk-04f8a86f"],"./amplify-button_3.entry.js":["efa9","chunk-2d23154f"],"./amplify-chatbot.entry.js":["9b2c","chunk-39a2e022"],"./amplify-checkbox.entry.js":["db86","chunk-2d228cf2"],"./amplify-confirm-sign-in_7.entry.js":["e862","chunk-59a544b9"],"./amplify-container.entry.js":["a72f","chunk-2d208de0"],"./amplify-federated-buttons_2.entry.js":["644c","chunk-2d0cf6e3"],"./amplify-federated-sign-in.entry.js":["a81f","chunk-2d209182"],"./amplify-form-field_4.entry.js":["f988","chunk-2d22dbc9"],"./amplify-greetings.entry.js":["57dd","chunk-2d0c9398"],"./amplify-icon-button.entry.js":["182d","chunk-2d0abfcf"],"./amplify-icon.entry.js":["b8f5","chunk-e5e547a4"],"./amplify-link.entry.js":["f482","chunk-2d22c8fe"],"./amplify-nav_2.entry.js":["23a0","chunk-2d0b26e6"],"./amplify-photo-picker.entry.js":["c4f1","chunk-2d217172"],"./amplify-picker.entry.js":["d040","chunk-2d21d0be"],"./amplify-radio-button_3.entry.js":["97a4","chunk-5c16a8d7"],"./amplify-s3-album.entry.js":["4e6f","chunk-d8708fd0"],"./amplify-s3-image-picker.entry.js":["b90a","chunk-17725551"],"./amplify-s3-image.entry.js":["76ad","chunk-1d800ad7"],"./amplify-s3-text-picker.entry.js":["5af2","chunk-1af68f81"],"./amplify-s3-text.entry.js":["dce0","chunk-2a0d4422"],"./amplify-select-mfa-type.entry.js":["fef4","chunk-2d238683"],"./amplify-sign-in-button.entry.js":["7358","chunk-f993edd8"],"./amplify-tooltip.entry.js":["1faa","chunk-2d0b722b"]};function o(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],o=n[0];return t.e(n[1]).then((function(){return t(o)}))}o.keys=function(){return Object.keys(r)},o.id="521b",e.exports=o},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d"),t("caad"),t("2532"),t("2ca0");var r=t("00bd"),o=t("d6a3"),i=t("7a23"),c=(t("b0c0"),t("a4d3"),t("e01a"),Object(i["f"])("span",{class:"fa fa-user"},null,-1)),u=Object(i["g"])(" logout "),a={id:"app"},s={key:0},d=Object(i["f"])("hr",null,null,-1),f=Object(i["f"])("h1",null,"Todo App",-1),l={action:"#"},p=["onClick"];function b(e,n){var t=Object(i["k"])("amplify-sign-out"),r=Object(i["k"])("amplify-authenticator");return Object(i["i"])(),Object(i["c"])(r,null,{default:Object(i["n"])((function(){return[Object(i["h"])(t,null,{"sign-out":Object(i["n"])((function(){return[c,u]})),_:1}),Object(i["f"])("div",a,["signedin"===e.authState&&e.user?(Object(i["i"])(),Object(i["e"])("div",s,[Object(i["f"])("div",null,"Hello, "+Object(i["l"])(e.user.username),1)])):Object(i["d"])("",!0),d,f,Object(i["f"])("form",l,[Object(i["o"])(Object(i["f"])("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=function(n){return e.name=n}),placeholder:"Todo name"},null,512),[[i["m"],e.name]]),Object(i["o"])(Object(i["f"])("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=function(n){return e.description=n}),placeholder:"Todo description"},null,512),[[i["m"],e.description]]),Object(i["f"])("button",{type:"submit",onClick:n[2]||(n[2]=function(){return e.createTodo&&e.createTodo.apply(e,arguments)})},"Create Todo")]),(Object(i["i"])(!0),Object(i["e"])(i["a"],null,Object(i["j"])(e.todos,(function(n){return Object(i["i"])(),Object(i["e"])("div",{key:n.id},[Object(i["f"])("div",null,[Object(i["f"])("h3",null,Object(i["l"])(n.name),1),Object(i["f"])("p",null,Object(i["l"])(n.description),1),Object(i["f"])("button",{onClick:function(){return e.deleteTodo(n.id)}},"Delete",8,p)])])})),128))])]})),_:1})}var h=t("2909"),m=t("1da1"),y=(t("96cf"),t("a030")),g=t("c50f"),j="\n  mutation CreateTodo(\n    $input: CreateTodoInput!\n    $condition: ModelTodoConditionInput\n  ) {\n    createTodo(input: $input, condition: $condition) {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n    }\n  }\n",k="\n  mutation DeleteTodo(\n    $input: DeleteTodoInput!\n    $condition: ModelTodoConditionInput\n  ) {\n    deleteTodo(input: $input, condition: $condition) {\n      id\n      name\n      description\n      createdAt\n      updatedAt\n    }\n  }\n",v="\n  query ListTodos(\n    $filter: ModelTodoFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listTodos(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        name\n        description\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",O=t("5530"),w=t("ade3"),_=t("3835"),T=t("d4ec"),S=t("bee2"),x=(t("d3b7"),t("ac1f"),t("1276"),t("bf82")),I=t("b238"),A=function(){function e(){Object(T["a"])(this,e)}return Object(S["a"])(e,[{key:"wait",value:function(e){var n={};return n.pending=new Promise((function(){for(var e,t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=o,t=Object(_["a"])(e,2),n.resolve=t[0],n.reject=t[1],e})),setTimeout(n.resolve,e,{time:e}),n.pending}},{key:"login",value:function(e,n){var t=this;return x["a"].signIn(e,n).then((function(){return t.credentials()}))}},{key:"logout",value:function(){var e=this;return x["a"].signOut().then((function(){return e.credentials()}))}},{key:"auth",value:function(){var e=this,n={},t="jack/abcd1234".split("/"),r=Object(_["a"])(t,2);return n.name=r[0],n.password=r[1],this.login(n.name,n.password).then((function(){return e.wait(1e3)})).then((function(){return e.logout()}))}},{key:"credentials",value:function(){return x["a"].currentCredentials().catch((function(){return{identityId:""}})).then((function(e){console.log(Object(w["a"])({},"[Auth]",e.identityId))})),x["a"].currentAuthenticatedUser().catch((function(){return{username:""}})).then((function(e){return x["a"].currentUserCredentials().catch((function(){return{identityId:""}})).then((function(n){return{user:e,credentials:n}}))})).then((function(e){var n=e.user,t=e.credentials;console.log({identityId:t.identityId,name:n.username})}))}},{key:"subscribe",value:function(e,n){console.log("[PubSub]","Subscribe",e),I["a"].subscribe(e,{provider:"AWSIoTProvider"}).subscribe({next:function(e){var t=e.value;return n(t)},error:function(e){var n=e.error;return console.error(Object(O["a"])({},n))},complete:function(){return console.log("Done")}})}},{key:"publish",value:function(e,n,t){return console.log("[PubSub]","Publish",e),I["a"].publish(e,{msg:n},t).catch((function(e){return console.error(Object(O["a"])({},e))}))}}]),e}(),R=new A;R.IoTClient=A;var P=R,C=t("8f9c"),E={aws_pubsub_region:"ap-northeast-1",aws_pubsub_endpoint:"wss://a2oxttuouwz18n-ats.iot.ap-northeast-1.amazonaws.com/mqtt"},M=function(){function e(){return Object(T["a"])(this,e),I["a"].addPluggable(new C["a"](E)).then((function(){return P.credentials()})),this}return Object(S["a"])(e,[{key:"received",value:function(e){return function(n){console.log("[Received]",e,JSON.stringify(n))}}}]),e}(),$=new M,q={name:"App",created:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log("[Created]",(new Date).toISOString()),P.subscribe("anonymous/#",$.received("anonymous/#")),P.subscribe("topic/#",$.received("topic/#")),e.unsubscribeAuth=Object(g["b"])((function(n,t){e.authState=n,e.user=t,n===g["a"].SignedIn&&e.onSignedIn(),n===g["a"].SignedOut&&e.onSignedOut(),n===g["a"].SignIn&&setTimeout((function(){return P.publish("anonymous/hello","Hello subscribers!")}),2e3)}));case 4:case"end":return n.stop()}}),n)})))()},mounted:function(){return Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("[Mounted]",(new Date).toISOString());case 1:case"end":return e.stop()}}),e)})))()},beforeUnmount:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log("[Unmount]",(new Date).toISOString()),e.unsubscribeAuth();case 2:case"end":return n.stop()}}),n)})))()},data:function(){return{user:void 0,authState:void 0,unsubscribeAuth:void 0,name:"",description:"",todos:[]}},methods:{onSignedIn:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log("[Auth]","user successfully signed in!"),setTimeout((function(){return P.publish("topic/hello","Welcome!")}),2e3),e.getTodos();case 3:case"end":return n.stop()}}),n)})))()},onSignedOut:function(){return Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("[Auth]","user is not signed in..."),setTimeout((function(){return P.publish("topic/bye","See you!")}),2e3);case 2:case"end":return e.stop()}}),e)})))()},deleteTodo:function(e){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",y["a"].graphql({query:k,variables:{input:{id:e}}}).then((function(){return n.getTodos()})).catch((function(e){var n;return(n=console).log.apply(n,Object(h["a"])(e.errors))})));case 1:case"end":return t.stop()}}),t)})))()},createTodo:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var t,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=e.name,r=e.description,t&&r){n.next=3;break}return n.abrupt("return");case 3:return o={name:t,description:r},n.abrupt("return",y["a"].graphql({query:j,variables:{input:o}}).then((function(){return e.getTodos()})).then((function(){e.name="",e.description=""})));case 5:case"end":return n.stop()}}),n)})))()},getTodos:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",y["a"].graphql({query:v}).then((function(n){return e.todos=n.data.listTodos.items})).catch((function(e){var n;return(n=console).log.apply(n,Object(h["a"])(e.errors))})));case 1:case"end":return n.stop()}}),n)})))()}}},D=(t("f344"),t("6b0d")),U=t.n(D);const L=U()(q,[["render",b]]);var N=L,F={aws_project_region:"ap-northeast-1",aws_cognito_identity_pool_id:"ap-northeast-1:5380fc6f-7b57-422e-87cc-11605783c0c9",aws_cognito_region:"ap-northeast-1",aws_user_pools_id:"ap-northeast-1_WnGbr0yg8",aws_user_pools_web_client_id:"1setmrft2mmaihfnm8234rb0oa",oauth:{},aws_cognito_login_mechanisms:["PREFERRED_USERNAME"],aws_cognito_signup_attributes:["EMAIL"],aws_cognito_mfa_configuration:"OFF",aws_cognito_mfa_types:["SMS"],aws_cognito_password_protection_settings:{passwordPolicyMinLength:8,passwordPolicyCharacters:[]},aws_cognito_verification_mechanisms:["EMAIL"],aws_appsync_graphqlEndpoint:"https://mjw5h3v5wfdwboscwxofg7djuy.appsync-api.ap-northeast-1.amazonaws.com/graphql",aws_appsync_region:"ap-northeast-1",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS"},z=F;r["default"].configure(z);var W=Object(i["b"])(N);W.config.compilerOptions.isCustomElement=function(e){return[e.startsWith("amplify-")].includes(!0)},Object(o["a"])().then((function(){Object(o["b"])(window),W.mount("#app")}))},cde9:function(e,n,t){},f344:function(e,n,t){"use strict";t("cde9")}});
//# sourceMappingURL=app.49563391.js.map